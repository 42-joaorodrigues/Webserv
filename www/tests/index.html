<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebServ - Tests</title>
    <link rel="stylesheet" href="../css/common.css">
</head>

<body>
    <div class="particles-background">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <!-- Background Music Player -->
    <div class="music-player">
        <button id="musicToggle" class="music-button">
            <span class="music-icon">üéµ</span>
            <span class="music-text">Music</span>
        </button>
        <audio id="backgroundMusic" loop preload="auto">
            <source src="../music/background.mp3" type="audio/mpeg">
            <source src="../music/background.ogg" type="audio/ogg">
            Your browser does not support the audio element.
        </audio>
    </div>

    <div class="main-container">
        <nav class="navigation">
            <a href="/" class="nav-button">Home</a>
            <a href="/team/" class="nav-button">Team</a>
            <a href="/about/" class="nav-button">About</a>
            <a href="/tests/" class="nav-button active-nav">Tests</a>
        </nav>

        <main class="content">
            <section id="tests" class="section active">
                <h2>WebServ Testing Dashboard</h2>
                <div class="tests-content">
                    <div class="test-intro">
                        <p>Test all WebServ features and HTTP methods. Perfect for validating your server
                            implementation!</p>
                    </div>

                    <!-- HTTP Methods Testing -->
                    <div class="test-category">
                        <h3>üåê HTTP Methods Testing</h3>
                        <div class="test-grid">
                            <div class="test-item">
                                <h4>GET Request</h4>
                                <div class="test-controls">
                                    <input type="text" id="getUrl" placeholder="/path/to/resource" value="/">
                                    <button onclick="testGet()" class="test-btn get-btn">Test GET</button>
                                </div>
                                <div class="test-result" id="getResult"></div>
                            </div>

                            <div class="test-item">
                                <h4>POST Request</h4>
                                <div class="test-controls">
                                    <input type="text" id="postUrl" placeholder="/post" value="/post">
                                    <textarea id="postData" placeholder="Request body data..."></textarea>
                                    <button onclick="testPost()" class="test-btn post-btn">Test POST</button>
                                </div>
                                <div class="test-result" id="postResult"></div>
                            </div>

                            <div class="test-item">
                                <h4>DELETE Request</h4>
                                <div class="test-controls">
                                    <input type="text" id="deleteUrl" placeholder="/files/delete-me.txt"
                                        value="/files/delete-me.txt">
                                    <button onclick="testDelete()" class="test-btn delete-btn">Test DELETE</button>
                                </div>
                                <div class="test-result" id="deleteResult"></div>
                            </div>
                        </div>
                    </div>

                    <!-- File Upload Testing -->
                    <div class="test-category">
                        <h3>üì§ File Upload Testing</h3>
                        <div class="upload-test">
                            <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                                <span class="upload-icon">üìÅ</span>
                                <span class="upload-text">Click to select file or drag and drop</span>
                                <input type="file" id="fileInput" style="display: none;"
                                    onchange="handleFileSelect(event)">
                            </div>
                            <div class="upload-controls">
                                <input type="text" id="uploadPath" placeholder="Upload path" value="/files">
                                <button onclick="testUpload()" class="test-btn upload-btn">Upload File</button>
                            </div>
                            <div class="test-result" id="uploadResult"></div>
                        </div>
                    </div>

                    <!-- CGI Testing -->
                    <div class="test-category">
                        <h3>‚öôÔ∏è CGI Script Testing</h3>
                        <div class="test-grid">
                            <div class="test-item">
                                <h4>Python CGI</h4>
                                <div class="test-controls">
                                    <input type="text" id="pythonCgiUrl" placeholder="/cgi-python/script.py"
                                        value="/cgi-python/test.py">
                                    <textarea id="pythonCgiData" placeholder="CGI input data..."></textarea>
                                    <button onclick="testPythonCgi()" class="test-btn cgi-btn">Test Python</button>
                                </div>
                                <div class="test-result" id="pythonCgiResult"></div>
                            </div>

                            <div class="test-item">
                                <h4>Bash CGI</h4>
                                <div class="test-controls">
                                    <input type="text" id="bashCgiUrl" placeholder="/cgi-bash/script.sh"
                                        value="/cgi-bash/test.sh">
                                    <textarea id="bashCgiData" placeholder="CGI input data..."></textarea>
                                    <button onclick="testBashCgi()" class="test-btn cgi-btn">Test Bash</button>
                                </div>
                                <div class="test-result" id="bashCgiResult"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Directory Testing -->
                    <div class="test-category">
                        <h3>üìÅ Directory & Listing Testing</h3>
                        <div class="test-grid">
                            <div class="test-item">
                                <h4>Directory Listing</h4>
                                <div class="test-controls">
                                    <input type="text" id="dirUrl" placeholder="/directory/" value="/files/">
                                    <button onclick="testDirectory()" class="test-btn dir-btn">Test Directory</button>
                                </div>
                                <div class="test-result" id="dirResult"></div>
                            </div>

                            <div class="test-item">
                                <h4>Autoindex Test</h4>
                                <div class="test-controls">
                                    <input type="text" id="autoindexUrl" placeholder="/files/" value="/files/">
                                    <button onclick="testAutoindex()" class="test-btn dir-btn">Test Autoindex</button>
                                </div>
                                <div class="test-result" id="autoindexResult"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Error Testing -->
                    <div class="test-category">
                        <h3>‚ùå Error Page Testing</h3>
                        <div class="test-grid">
                            <div class="test-item">
                                <h4>404 Not Found</h4>
                                <button onclick="test404()" class="test-btn error-btn">Test 404</button>
                                <div class="test-result" id="error404Result"></div>
                            </div>

                            <div class="test-item">
                                <h4>403 Forbidden</h4>
                                <button onclick="test403()" class="test-btn error-btn">Test 403</button>
                                <div class="test-result" id="error403Result"></div>
                            </div>

                            <div class="test-item">
                                <h4>413 Payload Too Large</h4>
                                <button onclick="test413()" class="test-btn error-btn">Test 413</button>
                                <div class="test-result" id="error413Result"></div>
                            </div>
                        </div>
                    </div>
                    <!-- Cookies Testing -->
                    <div class="test-category">
                        <h3>üç™ Cookie Testing</h3>
                        <div class="test-grid">
                            <div class="test-item">
                                <h4>Press The Button Below if you dare to take a cookie</h4>
                                <button onclick="confirmCookie()" class="test-btn error-btn">Take The Cookie
                                    Anyways</button>
                                <div class="test-result" id="CookieTest"></div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Performance Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="totalTests">0</div>
                        <div class="stat-label">Tests Run</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="successfulTests">0</div>
                        <div class="stat-label">Successful</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="avgResponseTime">0ms</div>
                        <div class="stat-label">Avg Response Time</div>
                    </div>
                </div>
    </div>
    </section>
    </main>
    </div>

    <script src="js/tests.js"></script>
    <script>
        // Background Music Controller
        const musicToggle = document.getElementById('musicToggle');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const musicIcon = document.querySelector('.music-icon');
        const musicText = document.querySelector('.music-text');
        let isPlaying = false;

        musicToggle.addEventListener('click', function () {
            if (isPlaying) {
                backgroundMusic.pause();
                musicIcon.textContent = 'üéµ';
                musicText.textContent = 'Music';
                musicToggle.classList.remove('playing');
                isPlaying = false;
            } else {
                backgroundMusic.play().then(() => {
                    musicIcon.textContent = 'üé∂';
                    musicText.textContent = 'Playing';
                    musicToggle.classList.add('playing');
                    isPlaying = true;
                }).catch(error => {
                    console.log('Audio playback failed:', error);
                });
            }
        });

        backgroundMusic.volume = 0.3;

        document.addEventListener('visibilitychange', function () {
            if (document.hidden && isPlaying) {
                backgroundMusic.pause();
            } else if (!document.hidden && isPlaying) {
                backgroundMusic.play();
            }
        });
    </script>
</body>

</html>